apiVersion: v1
kind: Service
metadata:
  name: rediscluster-headless-svc
  labels: 
    app: rediscluster
spec:
  type: ClusterIP
  clusterIP: None
  publishNotReadyAddresses: true
  selector: 
    app: rediscluster
  ports:
  - name: tcp-api
    port: 6379
    targetPort: api
  - name: tcp-gossip
    port: 16379
    targetPort: gossip
